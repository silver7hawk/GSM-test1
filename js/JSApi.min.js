var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());var callback_counter=0;var internal_callback="";(function(b){var a=b.setTimeout,c=b.document;b.jXHR=function(){var d,f,n,g,m=null;function k(){try{g.parentNode.removeChild(g)}catch(o){}}function j(){f=false;d="";k();g=null;h(0)}function e(p){try{m.onerror.call(m,p,d)}catch(o){throw new Error(p)}}function i(){if((this.readyState&&this.readyState!=="complete"&&this.readyState!=="loaded")||f){return}this.onload=this.onreadystatechange=null;f=true;if(m.readyState!==4){e("Script failed to load ["+d+"].")}k()}function l(){if(!f){e("Script failed to load ["+d+"], most probably due to an invalid URL or server error.")}}function h(o,p){p=p||[];m.readyState=o;if(typeof m.onreadystatechange==="function"){m.onreadystatechange.apply(m,p)}}m={onerror:null,onreadystatechange:null,readyState:0,open:function(r,o,q){j();var p=q;(function(s){b.jXHR[s]=function(){try{h.call(m,4,arguments)}catch(t){m.readyState=-1;e("Script failed to run ["+d+"].")}b.jXHR[s]=null}})(p);d=o;h(1)},send:function(){a(function(){g=c.createElement("script");g.setAttribute("type","text/javascript");g.onload=g.onreadystatechange=function(){i.call(g)};g.setAttribute("src",d);c.getElementsByTagName("head")[0].appendChild(g);g.onerror=function(){l.call(g)}},0);h(2)},setRequestHeader:function(){},getResponseHeader:function(){return""},getAllResponseHeaders:function(){return[]}};j();return m}})(window);Netdania={};Netdania.JsApi={};Netdania.JsApi.Utilities={};Netdania.JsApi.Response={};Netdania.JsApi.Request={};Netdania.JsApi.Utilities.ua=navigator.userAgent.toLowerCase();if(Netdania.JsApi.Utilities.ua.indexOf(" chrome/")>=0||Netdania.JsApi.Utilities.ua.indexOf(" firefox/")>=0||Netdania.JsApi.Utilities.ua.indexOf(" gecko/")>=0){Netdania.JsApi.StringMaker=function(){this.str="";this.length=0;this.append=function(a){this.str+=a;this.length+=a.length};this.prepend=function(a){this.str=a+this.str;this.length+=a.length};this.toString=function(){return this.str}}}else{Netdania.JsApi.StringMaker=function(){this.parts=[];this.length=0;this.append=function(a){this.parts.push(a);this.length+=a.length};this.prepend=function(a){this.parts.unshift(a);this.length+=a.length};this.toString=function(){return this.parts.join("")}}}Netdania.JsApi.Utilities.keyStr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_.";Netdania.JsApi.encode64=function(c){var a=new Netdania.JsApi.StringMaker();var k,h,f;var j,g,e,d;var b=0;while(b<c.length){k=c.charCodeAt(b++);h=c.charCodeAt(b++);f=c.charCodeAt(b++);j=k>>2;g=((k&3)<<4)|(h>>4);e=((h&15)<<2)|(f>>6);d=f&63;if(isNaN(h)){e=d=64}else{if(isNaN(f)){d=64}}a.append(Netdania.JsApi.Utilities.keyStr.charAt(j)+Netdania.JsApi.Utilities.keyStr.charAt(g)+Netdania.JsApi.Utilities.keyStr.charAt(e)+Netdania.JsApi.Utilities.keyStr.charAt(d))}return a.toString()};Netdania.JsApi.decode64=function(c){var a=new StringMaker();var k,h,f;var j,g,e,d;var b=0;c=c.replace(/[^A-Za-z0-9\-\_\.]/g,"");while(b<c.length){j=Netdania.JsApi.Utilities.keyStr.indexOf(c.charAt(b++));g=Netdania.JsApi.Utilities.keyStr.indexOf(c.charAt(b++));e=Netdania.JsApi.Utilities.keyStr.indexOf(c.charAt(b++));d=Netdania.JsApi.Utilities.keyStr.indexOf(c.charAt(b++));k=(j<<2)|(g>>4);h=((g&15)<<4)|(e>>2);f=((e&3)<<6)|d;a.append(String.fromCharCode(k));if(e!=64){a.append(String.fromCharCode(h))}if(d!=64){a.append(String.fromCharCode(f))}}return a.toString()};Netdania.JsApi.Request.getReqObjPrice=function(c,b,a){var e=++Netdania.JsApi.globalCurrentReqId;var d={t:1,i:e,m:a?1:0,s:c,p:b};return d};Netdania.JsApi.Request.getReqObjChart=function(c,g,f,b,a){var e=++Netdania.JsApi.globalCurrentReqId;var d={t:2,i:e,m:a?1:0,s:c,p:b,ts:g,pt:f};return d};Netdania.JsApi.Request.getReqObjRemove=function(a){var b={t:5,i:a};return b};Netdania.JsApi.Request.getReqObjHeadlines=function(d,c,b,a){var f=++Netdania.JsApi.globalCurrentReqId;var e={t:3,i:f,m:a?1:0,s:d,p:b,max:c};return e};Netdania.JsApi.Request.getReqObjStory=function(a,b){var d=++Netdania.JsApi.globalCurrentReqId;var c={t:4,i:d,s:a,p:b};return c};Netdania.JsApi.Request.getReqObjInstrumentLookup=function(d,e,h,f,a,b,c){var g=++Netdania.JsApi.globalCurrentReqId;var i={t:9,i:g,p:c,mkt:d,fid:e,str:h,mode:f,it:a,max:b};return i};Netdania.JsApi.Request.getReqObjNewsSearch=function(h,f,a,i,d,c,b){var e=++Netdania.JsApi.globalCurrentReqId;var g={t:10,i:e,s:h,str:f,max:a,st:i,et:d,f:c,p:b};return g};Netdania.JsApi.Response.MonitorChartResponse=function(c,b,d){var a={type:b,id:d,data:c,get:function(e){for(var f=0;f<c.length;f++){if(c[f].f==e){return c[f].v}}return null},getDecimals:function(e){for(var f=0;f<c.length;f++){if(c[f].f==e){return c[f].d}}return 0}};return a};Netdania.JsApi.Response.ChartUpdateResponse=function(d,b,e,c){var a={type:b,id:e,data:d,ts:c,getClose:function(){for(var f=0;f<d.length;f++){if(d[f].f==Netdania.JsApi.Fields.CHART_CLOSE){return d[f].v}}return"N/A"},getVolume:function(){for(var f=0;f<d.length;f++){if(d[f].f==Netdania.JsApi.Fields.CHART_VOLUME){return d[f].v}}return"N/A"}};a.close=a.getClose();a.volume=a.getVolume();return a};Netdania.JsApi.Response.MonitorPriceResponse=function(c,b,d){var a={type:b,id:d,data:c,modifiedFids:[],getFIDs:function(){var f=[];for(var e=0;e<c.length;e++){f.push(c[e].f)}modifiedFids=f;return modifiedFids},get:function(f){if(this.getFIDs(c).contains(f)){for(var e=0;e<c.length;e++){if(c[e].f===f){return c[e].v}}}else{return"N/A"}}};a.modifiedFids=a.getFIDs();return a};Netdania.JsApi.Response.NewsHistoryResponse=function(c,b,d){var a={type:b,id:d,data:c};return a};Netdania.JsApi.Response.LookupResponse=function(c,b,d){var a={type:b,id:d,data:c};return a};Netdania.JsApi.Response.MonitorNewsResponse=function(c,b,d){var a={type:b,id:d,data:c};return a};Netdania.JsApi.Response.NewsStoryResponse=function(c,b,d){var a={type:b,id:d,data:c};return a};Netdania.JsApi.Response.NewsSearchResponse=function(c,b,d){var a={type:b,id:d,data:c};return a};Netdania.JsApi.Response.GeneralMonitorResponse=function(c,b,d){var a={type:b,id:d,data:c};return a};Netdania.JsApi.getXReqPageSize=function(){var b=navigator.userAgent.toLowerCase();if(b.indexOf(" chrome/")>=0||b.indexOf(" firefox/")>=0||b.indexOf(" gecko/")>=0){return 20}var a=b.indexOf("msie");if(a>=0){try{if(parseFloat(b.substring(a+4))>7){return 20}}catch(c){}}return 4};Netdania.JsApi.unpackChartSeries=function(h,g){var a=h.split(",");var d=new Array(a.length);var e=Math.pow(10,g);var f=0;var b;for(var c=0;c<a.length;c++){b=parseInt(a[c],36)+f;d[c]=b/e;f=b}a=e=null;return d};Netdania.JsApi.Utilities.GetHost=function(){return window.location.hostname};Netdania.JsApi.Utilities.GetURL=function(){return window.location.href};Netdania.JsApi.Events={ONCONNECTED:"OnConnected",ONUPDATE:"OnUpdate",ONRAWUPDATE:"OnRawUpdate",ONDISCONNECTED:"OnDisconnected",ONINIT:"OnInit",ONRECONNECTED:"OnReconnect",ONPRICEUPDATE:"OnPriceUpdate",ONCHARTUPDATE:"OnChartUpdate",ONHISTORICALDATA:"OnHistoricalData",ONERROR:"OnError",ONINFO:"OnInfo",ONLOOKUP:"OnLookup",ONHISTORICALHEADLINES:"OnHistHeadlines",ONHEADLINEUPDATE:"OnHeadlineUpdate",ONNEWSSTORY:"OnNewsHist",ONNEWSSEARCH:"OnNewsSearch"};Netdania.JsApi.ConnectionStatus={LOGIN_OK:{code:0,message:"LOGIN_OK"},LOGIN_ERROR:{code:1,message:"LOGIN_ERROR"},LOGIN_ERROR_INVALID_USERGROUP:{code:3,message:"LOGIN_ERROR_INVALID_USERGROUP"},LOGIN_ERROR_SERVICE_NOT_ALLOWED:{code:4,message:"LOGIN_ERROR_SERVICE_NOT_ALLOWED"}};Netdania.JsApi.Messages={DISCONNECT_MSG:"Disconnected from server",HISTORICAL_DATA_MSG:"historical data...",CONNECTING_MSG:"connecting...",RECONNECTING_MSG:"reconnecting...",PRICE_UPDATE_MSG:"price update...",CHART_UPDATE_MSG:"chart update...",HISTORICAL_HEADLINES_MSG:"historical headlines...",HEADLINE_UPDATE_MSG:"headline update...",HEADLINE_STORY_MSG:"headline update...",HEADLINE_SEARCH_MSG:"headline update...",LOOKUP_MSG:"headline update...",INVALID_HOST_ERR_MSG:"Error: Invalid host",INSTRUMENT_ALREADY_ADDED_ERR_MSG:"Error: instrument already added."};Netdania.JsApi.ConnectionType={LONGPOLLING:"3"};Netdania.JsApi.globalCurrentReqId=0;Netdania.JsApi.JSONConnection=function(s){if(Netdania.JsApi.JSONConnection.prototype._singletonInstance){return Netdania.JsApi.JSONConnection.prototype._singletonInstance}Netdania.JsApi.JSONConnection.prototype._singletonInstance=this;this.Observer=new Netdania.UpdatesObserver();var j=this;var i=Netdania.JsApi.getXReqPageSize();var k=s.pollingInterval>=1000?s.pollingInterval:1000;var f=s.host;var b=s.behavior;var l=s.type;var p=null;var o=false;var m=[];var d=[];var n=false;var r=null;Events.enable.call(this);this.Connect=function(t){var z=Netdania.JsApi.Utilities.GetHost();if(z===""||z===null||z===undefined){throw new Error(Netdania.JsApi.Messages.INVALID_HOST_ERR_MSG)}if(o||(r&&r.pending)){return}r=new jXHR();r.pending=true;this.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.CONNECTING_MSG]);var y={g:z,ai:"jsapi-"+z,pr:b,au:Netdania.JsApi.Utilities.GetURL()};var v=Netdania.JsApi.encode64(JSON.stringify(y));if(d.length>0&&n){var x=Netdania.JsApi.encode64(JSON.stringify(d));d=[];n=false}var w="?xstream=1&v=1&dt=1&h="+v+"&xcmd="+x+"&cb=?&ts="+Math.random();internal_callback="cb"+(callback_counter++);w=w.replace(/=\?/,"=jXHR."+internal_callback);w=encodeURIComponent(w);r.internal_callback=internal_callback;r.onerror=function(B,A){j.fireEvent(Netdania.JsApi.Events.ONDISCONNECTED,[B,A]);r.pending=false;o=false;q()};var u=f+w;r.onreadystatechange=function(C){if(r.readyState===4){var B=C[1].s;if(B!==Netdania.JsApi.ConnectionStatus.LOGIN_OK.code){j.fireEvent(Netdania.JsApi.Events.ONERROR,[C[1].m]);j.fireEvent(Netdania.JsApi.Events.ONDISCONNECTED,[Netdania.JsApi.Messages.DISCONNECT_MSG]);return}p=C[1].m;o=true;j.fireEvent(Netdania.JsApi.Events.ONCONNECTED,[p]);r.pending=false;p=C[1].m;urlData="?dt="+l+"&sessid="+p+"&cb=?&xpoll&ts="+Math.random();internal_callback="cb"+(callback_counter++);urlData=urlData.replace(/=\?/,"=jXHR."+internal_callback);urlData=encodeURIComponent(urlData);r.url=f+urlData;r.internal_callback=internal_callback;if(C[2]){callback(C)}if(t){var A=m;m=[];h(A)}if(d.length>0&&n){h(d);d=[];n=false}r.onreadystatechange=function(D){if(r.readyState===4){callback(D);if(b===Netdania.JsApi.ConnectionType.LONGPOLLING){setTimeout(a,k)}}};setTimeout(a,50)}};r.open("GET",u,r.internal_callback);r.send()};var q=function(){setTimeout(function(){j.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.RECONNECTING_MSG]);if(r.pending===false&&!o){clearInterval(r.polling);r=null;j.Connect(true)}},1000)};var a=function(){if(!o){q()}if(r.pending===false&&r.url!==undefined){r.pending=true;r.open("GET",r.url,r.internal_callback);r.send()}};callback=function(B){if(B!==""&&B!==undefined){j.fireEvent(Netdania.JsApi.Events.ONRAWUPDATE,[B]);for(var C=0;C<B.length;C++){if(B[C].t==4){var u=B[C].f;for(var y=0;y<u.length;y++){var H=u[y].f;switch(H){case 107:case 108:break;default:u[y].v=Netdania.JsApi.unpackChartSeries(u[y].v,u[y].d);break}}var x=Netdania.JsApi.Response.MonitorChartResponse(u,B[C].t,B[C].i);j.Observer.init(u,B[C].i);j.fireEvent(Netdania.JsApi.Events.ONUPDATE,[u,"",B[C].i,B[C].t]);j.fireEvent(Netdania.JsApi.Events.ONHISTORICALDATA,[x]);j.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.HISTORICAL_DATA_MSG]);u=null}else{if(B[C].t==2){try{var u=B[C].f;var E=Netdania.JsApi.Response.MonitorPriceResponse(u,B[C].t,B[C].i);j.Observer.update(u,"",B[C].i,B[C].t);j.fireEvent(Netdania.JsApi.Events.ONUPDATE,[u,"",B[C].i,B[C].t]);j.fireEvent(Netdania.JsApi.Events.ONPRICEUPDATE,[E]);j.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.PRICE_UPDATE_MSG]);u=null;w=null}catch(G){}}else{if(B[C].t==18){try{var u=B[C].f;var w=B[C].rt;var A=Netdania.JsApi.Response.ChartUpdateResponse(u,B[C].t,B[C].i,w);j.Observer.update(u,w,B[C].i,B[C].t);j.fireEvent(Netdania.JsApi.Events.ONUPDATE,[u,w,B[C].i,B[C].t]);j.fireEvent(Netdania.JsApi.Events.ONCHARTUPDATE,[A]);j.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.CHART_UPDATE_MSG]);u=null;w=null}catch(G){}}else{if(B[C].t==6){try{var u=B[C].h;var z=Netdania.JsApi.Response.NewsHistoryResponse(u,B[C].t,B[C].i);j.Observer.update(u,"",B[C].i,B[C].t);j.fireEvent(Netdania.JsApi.Events.ONUPDATE,[u,"",B[C].i,B[C].t]);j.fireEvent(Netdania.JsApi.Events.ONHISTORICALHEADLINES,[z]);j.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.HISTORICAL_HEADLINES_MSG]);u=null;w=null}catch(G){}}else{if(B[C].t==19){try{var u=B[C].h;var t=Netdania.JsApi.Response.MonitorNewsResponse(u,B[C].t,B[C].i);j.Observer.update(u,"",B[C].i,B[C].t);j.fireEvent(Netdania.JsApi.Events.ONUPDATE,[u,"",B[C].i,B[C].t]);j.fireEvent(Netdania.JsApi.Events.ONHEADLINEUPDATE,[t]);j.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.HEADLINE_UPDATE_MSG]);u=null;w=null}catch(G){}}else{if(B[C].t==8){try{var u=B[C].s;var w=B[C].rt;var D=Netdania.JsApi.Response.NewsStoryResponse(u,B[C].t,B[C].i);j.Observer.update(u,w,B[C].i,B[C].t);j.fireEvent(Netdania.JsApi.Events.ONUPDATE,[u,w,B[C].i,B[C].t]);j.fireEvent(Netdania.JsApi.Events.ONNEWSSTORY,[D]);j.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.NEWS_STORY_MSG]);u=null;w=null}catch(G){}}else{if(B[C].t==15){try{var u=B[C].h;var v=Netdania.JsApi.Response.NewsSearchResponse(u,B[C].t,B[C].i);j.Observer.update(u,B[C].t,B[C].i);j.fireEvent(Netdania.JsApi.Events.ONUPDATE,[u,"",B[C].i,B[C].t]);j.fireEvent(Netdania.JsApi.Events.ONNEWSSEARCH,[v]);j.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.NEWS_SEARCH_MSG]);u=null;w=null}catch(G){}}else{if(B[C].t==13){try{var u=B[C].a;var I=Netdania.JsApi.Response.LookupResponse(u,B[C].t,B[C].i);j.Observer.update(u,"",B[C].i,B[C].t);j.fireEvent(Netdania.JsApi.Events.ONUPDATE,[u,"",B[C].i,B[C].t]);j.fireEvent(Netdania.JsApi.Events.ONLOOKUP,[I]);j.fireEvent(Netdania.JsApi.Events.ONINFO,[Netdania.JsApi.Messages.LOOKUP_MSG]);u=null;w=null}catch(G){}}else{try{var u=B[C].f||B[C].h||B[C].s||B[C].a;var w=B[C].rt;var F=Netdania.JsApi.Response.GeneralMonitorResponse(u,B[C].t,B[C].i);j.Observer.update(u,w,B[C].i,B[C].t);j.fireEvent(Netdania.JsApi.Events.ONUPDATE,[u,w,B[C].i,B[C].t]);u=null;w=null}catch(G){}}}}}}}}}}}r.pending=false;B=null};this.RemoveRequests=function(t){if(t===undefined){return}var w=[];for(var u=0;u<t.length;u++){w.push(Netdania.JsApi.Request.getReqObjRemove(t[u]))}h(w);w=null};this.AddRequest=function(t){e(t);d.push(t);m.push(t)};var h=function(t){if(!o){d=t;return}if(t===undefined||t.length===0){return}g(t)};var e=function(u){for(var t=0;t<m.length;t++){switch(u.t){case 1:if(u.p===m[t].p&&u.s===m[t].s&&u.m===m[t].m&&u.m===1){throw new Error(Netdania.JsApi.Messages.INSTRUMENT_ALREADY_ADDED_ERR_MSG)}break;case 2:case 3:if(u.p===m[t].p&&u.s===m[t].s&&u.m===m[t].m&&u.ts===m[t].ts){throw new Error(Netdania.JsApi.Messages.INSTRUMENT_ALREADY_ADDED_ERR_MSG)}break}}};this.Flush=function(){n=true;if(!o){h(d);this.Connect();return}else{h(d);d=[]}};this.GetRequestList=function(){return m};this.SetPendingRequest=function(t){r.pending=t};var c=function(t){var w=[];for(var u=0;u<t.length;u++){if(t[u].t==5){w.push(t[u].i)}}var v=[];if(w.length>0){for(u=0;u<t.length;u++){if(w.indexOf(t[u].i)==-1){v.push(t[u])}}t=v}return t};var g=function(x){r.pending=true;if(x.length>0){var t=new jXHR();var u=x.slice(0,i);x=x.slice(i,x.length);var y=Netdania.JsApi.encode64(JSON.stringify(u));m=m.concat(u);m=c(m);var w="?dt="+l+"&sessid="+p+"&xcmd="+y+"&cb=?";internal_callback="cb"+(callback_counter++);w=w.replace(/=\?/,"=jXHR."+internal_callback);w=encodeURIComponent(w);var v=f+w;t.internal_callback=internal_callback;t.open("GET",v,t.internal_callback);t.send();t.onreadystatechange=function(z){if(r.readyState===4){callback(z)}};u=null;t=null}if(x.length>0){setTimeout(function(){g(x)},50)}r.pending=false};this.appendRequests=function(t){n=true;if(!o){d=t;return}if(t===undefined||t.length===0){return}g(t)};this.removeRequests=function(t){this.RemoveRequests(t)}};if(!Array.prototype.forEach){Array.prototype.forEach=function(b){var a=this.length;if(typeof b!="function"){throw new TypeError()}var d=arguments[1];for(var c=0;c<a;c++){if(c in this){b.call(d,this[c],c,this)}}}}if(!Array.prototype.contains){Array.prototype.contains=function(b){var a=this.length;while(a--){if(this[a]===b){return true}}return false}}Netdania.UpdatesObserver=function(){this.components=[]};Netdania.UpdatesObserver.prototype={subscribe:function(a){this.components.push(a)},unsubscribe:function(a){this.components=this.components.filter(function(b){if(b!==a){return b}})},update:function(c,a,e,d){var b=d||window;this.components.forEach(function(f){if($.inArray(e,f.ids)>-1){f.update(c,a,e)}})},init:function(b,d,c){var a=c||window;this.components.forEach(function(e){if($.inArray(d,e.ids)>-1){e.init(b,d)}})}};var Events={};(function(){Events={enable:function(){var a=this;a.listeners={};a.fireEvent=function(c,b){Events.fireEvent.call(a,c,b)};a.addListener=function(c,b){Events.addListener.call(a,c,b)};a.removeListener=function(c,b){Events.removeListener.call(a,c,b)}},fireEvent:function(d,a){if(!!this.listeners[d]){for(var b=0;b<this.listeners[d].length;b++){var c=this.listeners[d][b];c.apply(window,a)}}},addListener:function(b,a){if(!this.listeners){Events.enable.call(this,b)}if(!this.listeners[b]){this.listeners[b]=[]}if(a instanceof Function){this.listeners[b].push(a)}},removeListener:function(c,b){if(!!this.listeners[c]&&this.listeners[c].length>0){if(!!b){var d=[];for(var a=0;a<this.listeners[c].length;a++){if(this.listeners[c][a]!=b){d.push(this.listeners[c][a])}}this.listeners[c]=d}else{this.listeners[c]=[]}}}}}());Netdania.JsApi.Fields={ALLOWED_CHART_TIME_SCALES:[0,1,5,10,15,30,60,120,240,480,1440,10080,43200],CHART_TIME_STAMP:100,CHART_OPEN:101,CHART_HIGH:102,CHART_LOW:103,CHART_CLOSE:104,CHART_VOLUME:105,CHART_OPEN_INT:106,CHART_BUYER_ID:107,CHART_SELLER_ID:108,TYPE_NUMERIC:1,TYPE_STRING:2,QUOTE_LAST:6,QUOTE_OPEN_INT:7,QUOTE_VOLUME_INC:8,QUOTE_BID:10,QUOTE_TIME_STAMP:17,QUOTE_ASK:11,QUOTE_MID_PRICE:9,QUOTE_HIGH:2,QUOTE_LOW:3,QUOTE_OPEN:4,QUOTE_CLOSE:1,QUOTE_VOLUME:5,QUOTE_CONTRIBUTOR:23,QUOTE_BID_SIZE:12,QUOTE_ASK_SIZE:13,QUOTE_PRV_VOLUME:18,QUOTE_SETTLE_PRICE:20,QUOTE_DIVIDEND:26,QUOTE_NAME:25,QUOTE_AVG_PRICE:16,QUOTE_EARN_PER_SHARE:24,QUOTE_ISIN_CODE:39,QUOTE_EQUITY_PER_SHARE:40,QUOTE_SALES_PER_SHARE:41,QUOTE_TOTAL_SHARES:42,QUOTE_52W_HIGH:21,QUOTE_52W_LOW:22,QUOTE_YEAR_HIGH:43,QUOTE_YEAR_LOW:44,QUOTE_1W_HIGH:120,QUOTE_1W_LOW:121,QUOTE_1MONTH_HIGH:122,QUOTE_1MONTH_LOW:123,QUOTE_3MONTH_HIGH:124,QUOTE_3MONTH_LOW:125,QUOTE_6MONTH_HIGH:126,QUOTE_6MONTH_LOW:127,QUOTE_PRV_YEAR_CLOSE:19,QUOTE_1WEEK_CLOSE:27,QUOTE_1MONTH_CLOSE:28,QUOTE_3MONTH_CLOSE:29,QUOTE_1YEAR_CLOSE:30,QUOTE_6MONTH_CLOSE:117,QUOTE_EARN_PER_SHARE_EST:97,QUOTE_BETA:98,QUOTE_YIELD:99,QUOTE_DEBT_TO_EQUITY:100,QUOTE_INSTRUMENT_TYPE:107,QUOTE_INDUSTRY_CODE:108,QUOTE_INDUSTRY_NAME:109,QUOTE_BUYER_ID:110,QUOTE_SELLER_ID:111,QUOTE_BOARD_LOT:113,QUOTE_MARKET_ID:115,QUOTE_CURRENCY:116,_QUOTE_CHANGE:14,_QUOTE_PERCENT_CHANGE:15,_QUOTE_YEAR_CHANGE:31,_QUOTE_YEAR_PERCENT_CHANGE:32,_QUOTE_1WEEK_CHANGE:33,_QUOTE_1WEEK_PERCENT_CHANGE:34,_QUOTE_1MONTH_CHANGE:35,_QUOTE_1MONTH_PERCENT_CHANGE:36,_QUOTE_3MONTH_CHANGE:45,_QUOTE_3MONTH_PERCENT_CHANGE:46,_QUOTE_1YEAR_CHANGE:37,_QUOTE_1YEAR_PERCENT_CHANGE:38,_QUOTE_6MONTH_CHANGE:118,_QUOTE_6MONTH_PERCENT_CHANGE:119,_QUOTE_PRICE_PER_EARN:101,_QUOTE_PRICE_PER_EARN_EST:102,_QUOTE_EARN_PER_PRICE_EST:103,_QUOTE_AMOUNT_TURNOVR:104,_QUOTE_SYMBOL:105,_QUOTE_LAST_BID_ASK:106,_QUOTE_MARKET_CAP:112,_QUOTE_BOARD_LOT_VALUE:114,QUOTE_BID_ON:47,QUOTE_ASK_ON:48,QUOTE_BID_SN:49,QUOTE_ASK_SN:50,QUOTE_BID_TN:51,QUOTE_ASK_TN:52,QUOTE_BID_1W:53,QUOTE_ASK_1W:54,QUOTE_BID_2W:55,QUOTE_ASK_2W:56,QUOTE_BID_3W:57,QUOTE_ASK_3W:58,QUOTE_BID_1M:59,QUOTE_ASK_1M:60,QUOTE_BID_2M:61,QUOTE_ASK_2M:62,QUOTE_BID_3M:63,QUOTE_ASK_3M:64,QUOTE_BID_4M:65,QUOTE_ASK_4M:66,QUOTE_BID_5M:67,QUOTE_ASK_5M:68,QUOTE_BID_6M:69,QUOTE_ASK_6M:70,QUOTE_BID_7M:71,QUOTE_ASK_7M:72,QUOTE_BID_8M:73,QUOTE_ASK_8M:74,QUOTE_BID_9M:75,QUOTE_ASK_9M:76,QUOTE_BID_10M:77,QUOTE_ASK_10M:78,QUOTE_BID_11M:79,QUOTE_ASK_11M:80,QUOTE_BID_1Y:81,QUOTE_ASK_1Y:82,QUOTE_BID_2Y:83,QUOTE_ASK_2Y:84,QUOTE_BID_3Y:85,QUOTE_ASK_3Y:86,QUOTE_BID_4Y:87,QUOTE_ASK_4Y:88,QUOTE_BID_5Y:89,QUOTE_ASK_5Y:90,QUOTE_BID_6Y:91,QUOTE_ASK_6Y:92,QUOTE_BID_7Y:93,QUOTE_ASK_7Y:94,QUOTE_BID_10Y:95,QUOTE_ASK_10Y:96};if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){var a=this.length>>>0;var b=Number(arguments[1])||0;b=(b<0)?Math.ceil(b):Math.floor(b);if(b<0){b+=a}for(;b<a;b++){if(b in this&&this[b]===c){return b}}return -1}};